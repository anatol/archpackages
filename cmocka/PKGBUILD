# Maintainer: Anatol Pomozov <anatol.pomozov@gmail.com>

pkgname=cmocka
url='http://cmocka.org/'
pkgver=0.3.2
pkgrel=1
pkgdesc='an elegant unit testing framework for C with support for mock objects'
arch=(i686 x86_64)
license=(GPL)
depends=(glibc)
makedepends=(cmake)
source=(https://open.cryptomilk.org/attachments/download/34/cmocka-$pkgver.tar.xz)
sha1sums=('ec536630f07f8a8f2766056e7de06bd72e0a2bf0')

build() {
  rm -rf build; mkdir build
  cd build
  cmake ../${pkgname}-${pkgver} -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release
  make
}

package() {
  cd build
  make install DESTDIR="$pkgdir"
}
