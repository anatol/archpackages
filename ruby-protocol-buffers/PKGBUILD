# Maintainer: Anatol Pomozov <anatol dot pomozov at gmail dot com>

pkgname=ruby-protocol-buffers
pkgver=1.4.0
pkgrel=1
pkgdesc='An implementation of Protocol Buffers for Ruby'
arch=(any)
url="https://github.com/codekitchen/ruby-protocol-buffers"
license=(BSD)
depends=(ruby)
makedepends=(rubygems)
options=(!emptydirs)
source=("https://rubygems.org/downloads/${pkgname}-$pkgver.gem")
sha256sums=('f60dfc12a0ffa8ec4168f24862c578d7aee1390ea7db4fc609208b67527a4b26')

package() {
  cd "$srcdir"

  local _gemdir="$(ruby -rubygems -e 'puts Gem.default_dir')"
  gem install --no-user-install --ignore-dependencies -i "${pkgdir}"${_gemdir} -n "${pkgdir}/usr/bin" ${pkgname}-$pkgver.gem
  rm -rf "${pkgdir}${_gemdir}/cache"
}
