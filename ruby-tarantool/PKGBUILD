# Maintainer: Anatol Pomozov <anatol dot pomozov at gmail dot com>

_gemname=tarantool
pkgname=ruby-$_gemname
pkgver=0.4.3.5
pkgrel=1
pkgdesc='Ruby client for Tarantool Key-Value Storage'
arch=('any')
url='https://github.com/mailru/tarantool-ruby'
license=('BSD')
depends=('ruby')
makedepends=('rubygems')
options=('!emptydirs')
source=("https://rubygems.org/downloads/${_gemname}-$pkgver.gem")
sha256sums=('6b4ee0738d83fd7599318cdb643c512fafb181fde464ee30680a4691b0ffdbed')

#TODO: add check() function

package() {
  cd "$srcdir"

  local _gemdir="$(ruby -rubygems -e 'puts Gem.default_dir')"
  gem install --no-user-install --ignore-dependencies -i "${pkgdir}${_gemdir}" -n "${pkgdir}/usr/bin" ${_gemname}-$pkgver.gem
  rm -rf "${pkgdir}${_gemdir}/cache"
}
